var activeDir,app,bodyParser,config,cookieParser,express,fs,path,routes,sign,staticDir,viewsRoot;path=require("path"),express=require("express"),config=require("./config").config,routes=require("./routes"),fs=require("fs"),sign=require("./controllers/sign"),app=express(),cookieParser=require("cookie-parser"),bodyParser=require("body-parser"),app.use(cookieParser()),app.use(bodyParser()),viewsRoot=path.join(__dirname,"view"),app.set("views",viewsRoot),app.set("view engine","jade"),app.use(function(e,r,i){return r.locals.config=config,i()}),app.use(sign.userinfo),app.use(sign["default"]),staticDir=path.join(__dirname,"public"),activeDir=path.join(__dirname,"active"),app.use(express["static"](staticDir)),app.use(express["static"](activeDir)),routes(app),app.listen(config.port,config.ip),console.log("Hangban start.");